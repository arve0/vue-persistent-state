{"version":3,"sources":["/Users/arve/git/vue-persistent-state/client.93aa5a63.js","/Users/arve/git/vue-persistent-state/demo.js","/Users/arve/git/vue-persistent-state/index.js"],"names":["webpackJsonp","module","exports","__webpack_require__","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0____","__WEBPACK_IMPORTED_MODULE_0_____default","n","__WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__","initialState","str","number","arr","obj","a","b","use","el","template","createWatchers","state","watch","key","deep","handler","newValue","oldValue","store","set","copy","install","Vue","val","get","mixin","data"],"mappings":"AAAAA,cAAc,IACP,CACA,CAOD,SAAUC,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAuE,IAUlF,SAAUF,EAAQG,EAAqBD,GAE7C,YACAE,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,GAC7C,IAAIC,GAAkCL,EAA8B,GAChEM,EAA0CN,EAAoBO,EAAEF,GAChEG,EAAoDR,EAA+C,ICxBxHS,GACFC,IAAK,aACLC,OAAQ,GACRC,OACAC,KACEC,EAAG,gBACHC,EAAG,GAIPP,GAAA,EAAIQ,IAAIV,EAAAQ,EAAiBL,EAWzB,IAAID,GAAA,GACFS,GAAI,OACJC,SAXEA,0LD0CE,SAAUpB,EAAQC,EAASC,GEnCjC,QAASmB,GAAgBC,GACvB,GAAIC,KACJ,KAAK,GAAIC,KAAOF,IAFc,SAErBE,GACPD,EAAMC,IACJC,MAAM,EACNC,QAAS,SAAUC,EAAUC,GAC3BC,EAAMC,IAAIN,EAAKG,OAJZH,EAQT,OAAOD,GAhCT,GAAMM,GAAQ3B,EAAQ,GAChB6B,EAAO7B,EAAQ,GAErBD,GAAQ+B,QAAU,SAAUC,EAAKtB,GAE/B,GAAIW,KACJ,KAAK,GAAIE,KAAOb,GAAc,CAC5B,GAAIuB,GAAML,EAAMM,IAAIX,IAAQb,EAAaa,EAEzCK,GAAMC,IAAIN,EAAKU,GACfZ,EAAME,GAAOU,EAGfD,EAAIG,OACFC,KAAM,WAEJ,MAAON,GAAKT,IAEdC,MAAOF,EAAeC,SFkFvB","file":"client.93aa5a63.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */\n/*!***********************!*\\\n  !*** multi ./demo.js ***!\n  \\***********************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /Users/arve/git/vue-persistent-state/demo.js */3);\n\n\n/***/ }),\n/* 3 */\n/*!*****************!*\\\n  !*** ./demo.js ***!\n  \\*****************/\n/*! exports provided:  */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(/*! ./ */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_____default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0____);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__ = __webpack_require__(/*! vue/dist/vue.esm.js */ 17);\n\n\n\nvar initialState = {\n  str: 'persist me',\n  number: 42,\n  arr: [],\n  obj: {\n    a: 'nested object',\n    b: 2\n  }\n};\n\n__WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_0_____default.a, initialState);\n\nvar template = '\\n<div>\\n  <input v-model=\"str\"><br>\\n  <input v-model=\"obj.a\"><br>\\n  {{ number }} <button @click=\"number++\">Inc</button><br>\\n  State is persisted, try refreshing page!\\n</div>\\n';\n\nnew __WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__[\"a\" /* default */]({\n  el: '#app',\n  template: template\n});\n\n/***/ }),\n/* 4 */\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(/*! store */ 5);\nvar copy = __webpack_require__(/*! deep-copy */ 16);\n\nexports.install = function (Vue, initialState) {\n  // get state from localStorage\n  var state = {};\n  for (var key in initialState) {\n    var val = store.get(key) || initialState[key];\n    // initial population to localStorage\n    store.set(key, val);\n    state[key] = val;\n  }\n\n  Vue.mixin({\n    data: function data() {\n      // make sure nested objects in initialState are not mutated\n      return copy(state);\n    },\n    watch: createWatchers(state)\n  });\n};\n\nfunction createWatchers(state) {\n  var watch = {};\n\n  var _loop = function _loop(key) {\n    watch[key] = {\n      deep: true,\n      handler: function handler(newValue, oldValue) {\n        store.set(key, newValue);\n      }\n    };\n  };\n\n  for (var key in state) {\n    _loop(key);\n  }\n  return watch;\n}\n\n/***/ })\n],[2]);\n\n\n// WEBPACK FOOTER //\n// client.93aa5a63.js","import persistentState from './'\nimport Vue from 'vue/dist/vue.esm.js'\n\nlet initialState = {\n  str: 'persist me',\n  number: 42,\n  arr: [],\n  obj: {\n    a: 'nested object',\n    b: 2\n  }\n}\n\nVue.use(persistentState, initialState)\n\nlet template = `\n<div>\n  <input v-model=\"str\"><br>\n  <input v-model=\"obj.a\"><br>\n  {{ number }} <button @click=\"number++\">Inc</button><br>\n  State is persisted, try refreshing page!\n</div>\n`\n\nnew Vue({\n  el: '#app',\n  template\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demo.js","const store = require('store')\nconst copy = require('deep-copy')\n\nexports.install = function (Vue, initialState) {\n  // get state from localStorage\n  let state = {}\n  for (let key in initialState) {\n    let val = store.get(key) || initialState[key]\n    // initial population to localStorage\n    store.set(key, val)\n    state[key] = val\n  }\n\n  Vue.mixin({\n    data: function () {\n      // make sure nested objects in initialState are not mutated\n      return copy(state)\n    },\n    watch: createWatchers(state)\n  })\n}\n\nfunction createWatchers (state) {\n  let watch = {}\n  for (let key in state) {\n    watch[key] = {\n      deep: true,\n      handler: function (newValue, oldValue) {\n        store.set(key, newValue)\n      }\n    }\n  }\n  return watch\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}