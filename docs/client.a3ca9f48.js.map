{"version":3,"sources":["/Users/arve/git/vue-persistent-state/client.a3ca9f48.js","/Users/arve/git/vue-persistent-state/demo.js","/Users/arve/git/vue-persistent-state/index.js"],"names":["webpackJsonp","module","exports","__webpack_require__","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0____","__WEBPACK_IMPORTED_MODULE_0_____default","n","__WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__","initialState","str","obj","a","number","arr","use","component","template","el","methods","reload","this","$store","clearAll","window","location","createWatchers","state","watch","key","deep","handler","newValue","oldValue","store","set","copy","install","Vue","val","get","mixin","data","prototype"],"mappings":"AAAAA,cAAc,IACP,CACA,CAOD,SAAUC,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAuE,IAUlF,SAAUF,EAAQG,EAAqBD,GAE7C,YACAE,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,GAC7C,IAAIC,GAAkCL,EAA8B,GAChEM,EAA0CN,EAAoBO,EAAEF,GAChEG,EAAoDR,EAA+C,ICxBxHS,GACFC,IAAK,aACLC,KACEC,EAAG,iBAELC,OAAQ,GACRC,KAAM,UAGRN,GAAA,EAAIO,IAAIT,EAAAM,EAAiBH,GAGzBD,EAAA,EAAIQ,UAAU,eACZC,6DAGF,GAAIT,GAAA,GAEFU,GAAI,OACJD,0WAUAE,SACEC,OAAQ,WAENC,KAAKC,OAAOC,WAEZC,OAAOC,SAASL,cD+BhB,SAAUtB,EAAQC,EAASC,GE3CjC,QAAS0B,GAAgBC,GACvB,GAAIC,KACJ,KAAK,GAAIC,KAAOF,IAFc,SAErBE,GACPD,EAAMC,IACJC,MAAM,EACNC,QAAS,SAAUC,EAAUC,GAC3BC,EAAMC,IAAIN,EAAKG,OAJZH,EAQT,OAAOD,GAnCT,GAAMM,GAAQlC,EAAQ,GAChBoC,EAAOpC,EAAQ,GAErBD,GAAQsC,QAAU,SAAUC,EAAK7B,GAE/B,GAAIkB,KACJ,KAAK,GAAIE,KAAOpB,GAAc,CAC5B,GAAI8B,GAAML,EAAMM,IAAIX,IAAQpB,EAAaoB,EAEzCK,GAAMC,IAAIN,EAAKU,GACfZ,EAAME,GAAOU,EAGfZ,EAAQS,EAAKT,GAEbW,EAAIG,OACFC,KAAM,WACJ,MAAOf,IAETC,MAAOF,EAAeC,KAGxBW,EAAIK,UAAUrB,OAASY,MF4FtB","file":"client.a3ca9f48.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */\n/*!***********************!*\\\n  !*** multi ./demo.js ***!\n  \\***********************/\n/*! no static exports found */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /Users/arve/git/vue-persistent-state/demo.js */3);\n\n\n/***/ }),\n/* 3 */\n/*!*****************!*\\\n  !*** ./demo.js ***!\n  \\*****************/\n/*! exports provided:  */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(/*! ./ */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_____default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0____);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__ = __webpack_require__(/*! vue/dist/vue.esm.js */ 17);\n\n\n\nvar initialState = {\n  str: 'persist me',\n  obj: {\n    a: 'nested object'\n  },\n  number: 42,\n  arr: ['item 0']\n};\n\n__WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_0_____default.a, initialState);\n\n// works with components too\n__WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__[\"a\" /* default */].component('a-component', {\n  template: '<span>Array contents: {{arr.join(\\', \\')}}</span>'\n});\n\nnew __WEBPACK_IMPORTED_MODULE_1_vue_dist_vue_esm_js__[\"a\" /* default */]({\n  // initialState is injected as data\n  el: '#app',\n  template: '\\n    <div>\\n      <input v-model=\"str\">\\n      <button @click=\"arr.push(str)\">Add to array</button><br>\\n      <input v-model=\"obj.a\"><br>\\n      {{ number }} <button @click=\"number++\">Inc</button><br>\\n      <a-component/><br>\\n      <button @click=\"reload\">Reset</button><br><br>\\n      State is persisted, try refreshing the page!<br>\\n    </div>',\n  methods: {\n    reload: function reload() {\n      // remove all persisted state\n      this.$store.clearAll();\n      // reloads page\n      window.location.reload();\n    }\n  }\n});\n\n/***/ }),\n/* 4 */\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/*! no static exports found */\n/*! exports used: default */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar store = __webpack_require__(/*! store */ 5);\nvar copy = __webpack_require__(/*! deep-copy */ 16);\n\nexports.install = function (Vue, initialState) {\n  // get state from localStorage\n  var state = {};\n  for (var key in initialState) {\n    var val = store.get(key) || initialState[key];\n    // initial population to localStorage\n    store.set(key, val);\n    state[key] = val;\n  }\n  // make sure nested objects in initialState are not mutated\n  state = copy(state);\n\n  Vue.mixin({\n    data: function data() {\n      return state;\n    },\n    watch: createWatchers(state)\n  });\n  // make store API available through $store\n  Vue.prototype.$store = store;\n};\n\nfunction createWatchers(state) {\n  var watch = {};\n\n  var _loop = function _loop(key) {\n    watch[key] = {\n      deep: true,\n      handler: function handler(newValue, oldValue) {\n        store.set(key, newValue);\n      }\n    };\n  };\n\n  for (var key in state) {\n    _loop(key);\n  }\n  return watch;\n}\n\n/***/ })\n],[2]);\n\n\n// WEBPACK FOOTER //\n// client.a3ca9f48.js","import persistentState from './'\nimport Vue from 'vue/dist/vue.esm.js'\n\nlet initialState = {\n  str: 'persist me',\n  obj: {\n    a: 'nested object'\n  },\n  number: 42,\n  arr: ['item 0']\n}\n\nVue.use(persistentState, initialState)\n\n// works with components too\nVue.component('a-component', {\n  template: `<span>Array contents: {{arr.join(', ')}}</span>`\n})\n\nnew Vue({\n  // initialState is injected as data\n  el: '#app',\n  template: `\n    <div>\n      <input v-model=\"str\">\n      <button @click=\"arr.push(str)\">Add to array</button><br>\n      <input v-model=\"obj.a\"><br>\n      {{ number }} <button @click=\"number++\">Inc</button><br>\n      <a-component/><br>\n      <button @click=\"reload\">Reset</button><br><br>\n      State is persisted, try refreshing the page!<br>\n    </div>`,\n  methods: {\n    reload: function () {\n      // remove all persisted state\n      this.$store.clearAll()\n      // reloads page\n      window.location.reload()\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demo.js","const store = require('store')\nconst copy = require('deep-copy')\n\nexports.install = function (Vue, initialState) {\n  // get state from localStorage\n  let state = {}\n  for (let key in initialState) {\n    let val = store.get(key) || initialState[key]\n    // initial population to localStorage\n    store.set(key, val)\n    state[key] = val\n  }\n  // make sure nested objects in initialState are not mutated\n  state = copy(state)\n\n  Vue.mixin({\n    data: function () {\n      return state\n    },\n    watch: createWatchers(state)\n  })\n  // make store API available through $store\n  Vue.prototype.$store = store\n}\n\nfunction createWatchers (state) {\n  let watch = {}\n  for (let key in state) {\n    watch[key] = {\n      deep: true,\n      handler: function (newValue, oldValue) {\n        store.set(key, newValue)\n      }\n    }\n  }\n  return watch\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}